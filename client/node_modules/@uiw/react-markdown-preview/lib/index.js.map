{
  "version": 3,
  "names": [
    "React",
    "forwardRef",
    "props",
    "ref",
    "prefixCls",
    "className",
    "source",
    "style",
    "disableCopy",
    "onScroll",
    "onMouseOver",
    "pluginsFilter",
    "rewrite",
    "rehypeRewrite",
    "warpperElement",
    "other",
    "mdp",
    "createRef",
    "useImperativeHandle",
    "cls",
    "rehypeRewriteHandle",
    "node",
    "index",
    "parent",
    "type",
    "test",
    "tagName",
    "child",
    "children",
    "properties",
    "ariaHidden",
    "class",
    "octiconLink",
    "code",
    "getCodeString",
    "push",
    "copyElement",
    "rehypePlugins",
    "reservedMeta",
    "rehypePrism",
    "ignoreMissing",
    "rehypeRaw",
    "slug",
    "headings",
    "rehypeIgnore",
    "rehypeAttrs",
    "customProps",
    "allowElement",
    "element",
    "remarkPlugins",
    "gfm"
  ],
  "sources": [
    "../src/index.tsx"
  ],
  "sourcesContent": [
    "import React, { useImperativeHandle } from 'react';\nimport ReactMarkdown, { Options } from 'react-markdown';\nimport { Element } from 'hast';\nimport { PluggableList } from 'unified';\nimport gfm from 'remark-gfm';\nimport slug from 'rehype-slug';\nimport headings from 'rehype-autolink-headings';\nimport rehypeRaw from 'rehype-raw';\nimport rehypeAttrs from 'rehype-attr';\nimport rehypeIgnore from 'rehype-ignore';\nimport rehypePrism from 'rehype-prism-plus';\nimport rehypeRewrite, { getCodeString, RehypeRewriteOptions } from 'rehype-rewrite';\nimport { octiconLink } from './nodes/octiconLink';\nimport { copyElement } from './nodes/copy';\nimport './styles/markdown.less';\n\nimport { reservedMeta } from './plugins/reservedMeta';\n\nexport interface MarkdownPreviewProps extends Omit<Options, 'children'> {\n  prefixCls?: string;\n  className?: string;\n  source?: string;\n  disableCopy?: boolean;\n  style?: React.CSSProperties;\n  pluginsFilter?: (type: 'rehype' | 'remark', plugin: PluggableList) => PluggableList;\n  warpperElement?: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> & {\n    'data-color-mode'?: 'light' | 'dark';\n  };\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n  onMouseOver?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  rehypeRewrite?: RehypeRewriteOptions['rewrite'];\n}\n\nexport interface MarkdownPreviewRef extends MarkdownPreviewProps {\n  mdp: React.RefObject<HTMLDivElement>;\n}\n\nexport default React.forwardRef<MarkdownPreviewRef, MarkdownPreviewProps>((props, ref) => {\n  const {\n    prefixCls = 'wmde-markdown wmde-markdown-color',\n    className,\n    source,\n    style,\n    disableCopy = false,\n    onScroll,\n    onMouseOver,\n    pluginsFilter,\n    rehypeRewrite: rewrite,\n    warpperElement = {},\n    ...other\n  } = props;\n  const mdp = React.createRef<HTMLDivElement>();\n  useImperativeHandle(ref, () => ({ ...props, mdp }), [mdp, props]);\n  const cls = `${prefixCls || ''} ${className || ''}`;\n\n  const rehypeRewriteHandle: RehypeRewriteOptions['rewrite'] = (node, index, parent) => {\n    if (node.type === 'element' && parent && parent.type === 'root' && /h(1|2|3|4|5|6)/.test(node.tagName)) {\n      const child = node.children && (node.children[0] as Element);\n      if (child && child.properties && child.properties.ariaHidden === 'true') {\n        child.properties = { class: 'anchor', ...child.properties };\n        child.children = [octiconLink];\n      }\n    }\n    if (node.type === 'element' && node.tagName === 'pre' && !disableCopy) {\n      const code = getCodeString(node.children);\n      node.children.push(copyElement(code));\n    }\n    rewrite && rewrite(node, index, parent);\n  };\n\n  const rehypePlugins: PluggableList = [\n    reservedMeta,\n    [rehypePrism, { ignoreMissing: true }],\n    rehypeRaw,\n    slug,\n    headings,\n    rehypeIgnore,\n    [rehypeRewrite, { rewrite: rehypeRewriteHandle }],\n    [rehypeAttrs, { properties: 'attr' }],\n    ...(other.rehypePlugins || []),\n  ];\n  const customProps: MarkdownPreviewProps = {\n    allowElement: (element, index, parent) => {\n      if (other.allowElement) {\n        return other.allowElement(element, index, parent);\n      }\n      return /^[A-Za-z0-9]+$/.test(element.tagName);\n    },\n  };\n  const remarkPlugins = [...(other.remarkPlugins || []), gfm];\n  return (\n    <div ref={mdp} onScroll={onScroll} onMouseOver={onMouseOver} {...warpperElement} className={cls} style={style}>\n      <ReactMarkdown\n        {...other}\n        {...customProps}\n        rehypePlugins={pluginsFilter ? pluginsFilter('rehype', rehypePlugins) : rehypePlugins}\n        remarkPlugins={pluginsFilter ? pluginsFilter('remark', remarkPlugins) : remarkPlugins}\n        children={source || ''}\n      />\n    </div>\n  );\n});\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA;;;;;;4BAqBeA,cAAA,CAAMC,UAAN,CAA2D,UAACC,KAAD,EAAQC,GAAR,EAAgB;EACxF,uBAYID,KAZJ,CACEE,SADF;EAAA,IACEA,SADF,iCACc,mCADd;EAAA,IAEEC,SAFF,GAYIH,KAZJ,CAEEG,SAFF;EAAA,IAGEC,MAHF,GAYIJ,KAZJ,CAGEI,MAHF;EAAA,IAIEC,KAJF,GAYIL,KAZJ,CAIEK,KAJF;EAAA,yBAYIL,KAZJ,CAKEM,WALF;EAAA,IAKEA,WALF,mCAKgB,KALhB;EAAA,IAMEC,QANF,GAYIP,KAZJ,CAMEO,QANF;EAAA,IAOEC,WAPF,GAYIR,KAZJ,CAOEQ,WAPF;EAAA,IAQEC,aARF,GAYIT,KAZJ,CAQES,aARF;EAAA,IASiBC,OATjB,GAYIV,KAZJ,CASEW,aATF;EAAA,4BAYIX,KAZJ,CAUEY,cAVF;EAAA,IAUEA,cAVF,sCAUmB,EAVnB;EAAA,IAWKC,KAXL,0CAYIb,KAZJ;;EAaA,IAAMc,GAAG,gBAAGhB,cAAA,CAAMiB,SAAN,EAAZ;;EACA,IAAAC,0BAAA,EAAoBf,GAApB,EAAyB;IAAA,mEAAYD,KAAZ;MAAmBc,GAAG,EAAHA;IAAnB;EAAA,CAAzB,EAAoD,CAACA,GAAD,EAAMd,KAAN,CAApD;EACA,IAAMiB,GAAG,aAAMf,SAAS,IAAI,EAAnB,cAAyBC,SAAS,IAAI,EAAtC,CAAT;;EAEA,IAAMe,mBAAoD,GAAG,SAAvDA,mBAAuD,CAACC,IAAD,EAAOC,KAAP,EAAcC,MAAd,EAAyB;IACpF,IAAIF,IAAI,CAACG,IAAL,KAAc,SAAd,IAA2BD,MAA3B,IAAqCA,MAAM,CAACC,IAAP,KAAgB,MAArD,IAA+D,iBAAiBC,IAAjB,CAAsBJ,IAAI,CAACK,OAA3B,CAAnE,EAAwG;MACtG,IAAMC,KAAK,GAAGN,IAAI,CAACO,QAAL,IAAkBP,IAAI,CAACO,QAAL,CAAc,CAAd,CAAhC;;MACA,IAAID,KAAK,IAAIA,KAAK,CAACE,UAAf,IAA6BF,KAAK,CAACE,UAAN,CAAiBC,UAAjB,KAAgC,MAAjE,EAAyE;QACvEH,KAAK,CAACE,UAAN;UAAqBE,KAAK,EAAE;QAA5B,GAAyCJ,KAAK,CAACE,UAA/C;QACAF,KAAK,CAACC,QAAN,GAAiB,CAACI,wBAAD,CAAjB;MACD;IACF;;IACD,IAAIX,IAAI,CAACG,IAAL,KAAc,SAAd,IAA2BH,IAAI,CAACK,OAAL,KAAiB,KAA5C,IAAqD,CAAClB,WAA1D,EAAuE;MACrE,IAAMyB,IAAI,GAAG,IAAAC,4BAAA,EAAcb,IAAI,CAACO,QAAnB,CAAb;MACAP,IAAI,CAACO,QAAL,CAAcO,IAAd,CAAmB,IAAAC,iBAAA,EAAYH,IAAZ,CAAnB;IACD;;IACDrB,OAAO,IAAIA,OAAO,CAACS,IAAD,EAAOC,KAAP,EAAcC,MAAd,CAAlB;EACD,CAbD;;EAeA,IAAMc,aAA4B,IAChCC,0BADgC,EAEhC,CAACC,wBAAD,EAAc;IAAEC,aAAa,EAAE;EAAjB,CAAd,CAFgC,EAGhCC,kBAHgC,EAIhCC,mBAJgC,EAKhCC,+BALgC,EAMhCC,qBANgC,EAOhC,CAAC/B,sBAAD,EAAgB;IAAED,OAAO,EAAEQ;EAAX,CAAhB,CAPgC,EAQhC,CAACyB,mBAAD,EAAc;IAAEhB,UAAU,EAAE;EAAd,CAAd,CARgC,0CAS5Bd,KAAK,CAACsB,aAAN,IAAuB,EATK,EAAlC;EAWA,IAAMS,WAAiC,GAAG;IACxCC,YAAY,EAAE,sBAACC,OAAD,EAAU1B,KAAV,EAAiBC,MAAjB,EAA4B;MACxC,IAAIR,KAAK,CAACgC,YAAV,EAAwB;QACtB,OAAOhC,KAAK,CAACgC,YAAN,CAAmBC,OAAnB,EAA4B1B,KAA5B,EAAmCC,MAAnC,CAAP;MACD;;MACD,OAAO,iBAAiBE,IAAjB,CAAsBuB,OAAO,CAACtB,OAA9B,CAAP;IACD;EANuC,CAA1C;EAQA,IAAMuB,aAAa,8CAAQlC,KAAK,CAACkC,aAAN,IAAuB,EAA/B,IAAoCC,kBAApC,EAAnB;EACA,oBACE;IAAK,GAAG,EAAElC,GAAV;IAAe,QAAQ,EAAEP,QAAzB;IAAmC,WAAW,EAAEC;EAAhD,GAAiEI,cAAjE;IAAiF,SAAS,EAAEK,GAA5F;IAAiG,KAAK,EAAEZ,KAAxG;IAAA,uBACE,qBAAC,sBAAD,0FACMQ,KADN,GAEM+B,WAFN;MAGE,aAAa,EAAEnC,aAAa,GAAGA,aAAa,CAAC,QAAD,EAAW0B,aAAX,CAAhB,GAA4CA,aAH1E;MAIE,aAAa,EAAE1B,aAAa,GAAGA,aAAa,CAAC,QAAD,EAAWsC,aAAX,CAAhB,GAA4CA,aAJ1E;MAKE,QAAQ,EAAE3C,MAAM,IAAI;IALtB;EADF,GADF;AAWD,CAhEc,C"
}