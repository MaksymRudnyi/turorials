{
  "version": 3,
  "names": [
    "React",
    "useImperativeHandle",
    "ReactMarkdown",
    "gfm",
    "slug",
    "headings",
    "rehypeRaw",
    "rehypeAttrs",
    "rehypeIgnore",
    "rehypePrism",
    "rehypeRewrite",
    "getCodeString",
    "octiconLink",
    "copyElement",
    "reservedMeta",
    "forwardRef",
    "props",
    "ref",
    "prefixCls",
    "className",
    "source",
    "style",
    "disableCopy",
    "onScroll",
    "onMouseOver",
    "pluginsFilter",
    "rewrite",
    "warpperElement",
    "other",
    "mdp",
    "createRef",
    "cls",
    "rehypeRewriteHandle",
    "node",
    "index",
    "parent",
    "type",
    "test",
    "tagName",
    "child",
    "children",
    "properties",
    "ariaHidden",
    "class",
    "code",
    "push",
    "rehypePlugins",
    "ignoreMissing",
    "customProps",
    "allowElement",
    "element",
    "remarkPlugins"
  ],
  "sources": [
    "../src/index.tsx"
  ],
  "sourcesContent": [
    "import React, { useImperativeHandle } from 'react';\nimport ReactMarkdown, { Options } from 'react-markdown';\nimport { Element } from 'hast';\nimport { PluggableList } from 'unified';\nimport gfm from 'remark-gfm';\nimport slug from 'rehype-slug';\nimport headings from 'rehype-autolink-headings';\nimport rehypeRaw from 'rehype-raw';\nimport rehypeAttrs from 'rehype-attr';\nimport rehypeIgnore from 'rehype-ignore';\nimport rehypePrism from 'rehype-prism-plus';\nimport rehypeRewrite, { getCodeString, RehypeRewriteOptions } from 'rehype-rewrite';\nimport { octiconLink } from './nodes/octiconLink';\nimport { copyElement } from './nodes/copy';\nimport './styles/markdown.less';\n\nimport { reservedMeta } from './plugins/reservedMeta';\n\nexport interface MarkdownPreviewProps extends Omit<Options, 'children'> {\n  prefixCls?: string;\n  className?: string;\n  source?: string;\n  disableCopy?: boolean;\n  style?: React.CSSProperties;\n  pluginsFilter?: (type: 'rehype' | 'remark', plugin: PluggableList) => PluggableList;\n  warpperElement?: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> & {\n    'data-color-mode'?: 'light' | 'dark';\n  };\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n  onMouseOver?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  rehypeRewrite?: RehypeRewriteOptions['rewrite'];\n}\n\nexport interface MarkdownPreviewRef extends MarkdownPreviewProps {\n  mdp: React.RefObject<HTMLDivElement>;\n}\n\nexport default React.forwardRef<MarkdownPreviewRef, MarkdownPreviewProps>((props, ref) => {\n  const {\n    prefixCls = 'wmde-markdown wmde-markdown-color',\n    className,\n    source,\n    style,\n    disableCopy = false,\n    onScroll,\n    onMouseOver,\n    pluginsFilter,\n    rehypeRewrite: rewrite,\n    warpperElement = {},\n    ...other\n  } = props;\n  const mdp = React.createRef<HTMLDivElement>();\n  useImperativeHandle(ref, () => ({ ...props, mdp }), [mdp, props]);\n  const cls = `${prefixCls || ''} ${className || ''}`;\n\n  const rehypeRewriteHandle: RehypeRewriteOptions['rewrite'] = (node, index, parent) => {\n    if (node.type === 'element' && parent && parent.type === 'root' && /h(1|2|3|4|5|6)/.test(node.tagName)) {\n      const child = node.children && (node.children[0] as Element);\n      if (child && child.properties && child.properties.ariaHidden === 'true') {\n        child.properties = { class: 'anchor', ...child.properties };\n        child.children = [octiconLink];\n      }\n    }\n    if (node.type === 'element' && node.tagName === 'pre' && !disableCopy) {\n      const code = getCodeString(node.children);\n      node.children.push(copyElement(code));\n    }\n    rewrite && rewrite(node, index, parent);\n  };\n\n  const rehypePlugins: PluggableList = [\n    reservedMeta,\n    [rehypePrism, { ignoreMissing: true }],\n    rehypeRaw,\n    slug,\n    headings,\n    rehypeIgnore,\n    [rehypeRewrite, { rewrite: rehypeRewriteHandle }],\n    [rehypeAttrs, { properties: 'attr' }],\n    ...(other.rehypePlugins || []),\n  ];\n  const customProps: MarkdownPreviewProps = {\n    allowElement: (element, index, parent) => {\n      if (other.allowElement) {\n        return other.allowElement(element, index, parent);\n      }\n      return /^[A-Za-z0-9]+$/.test(element.tagName);\n    },\n  };\n  const remarkPlugins = [...(other.remarkPlugins || []), gfm];\n  return (\n    <div ref={mdp} onScroll={onScroll} onMouseOver={onMouseOver} {...warpperElement} className={cls} style={style}>\n      <ReactMarkdown\n        {...other}\n        {...customProps}\n        rehypePlugins={pluginsFilter ? pluginsFilter('rehype', rehypePlugins) : rehypePlugins}\n        remarkPlugins={pluginsFilter ? pluginsFilter('remark', remarkPlugins) : remarkPlugins}\n        children={source || ''}\n      />\n    </div>\n  );\n});\n"
  ],
  "mappings": "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"
}