{"ast":null,"code":"function valueType(value) {\n  if (value === undefined) return 'undefined';\n  if (Array.isArray(value)) return 'array';\n  if (typeof value === 'object') return 'object';\n  return 'scalar';\n}\n\nfunction setLastValue(context, step, currentValue, entryValue) {\n  switch (valueType(currentValue)) {\n    case 'undefined':\n      if (step.append) {\n        context[step.key] = [entryValue];\n      } else {\n        context[step.key] = entryValue;\n      }\n\n      break;\n\n    case 'array':\n      context[step.key].push(entryValue);\n      break;\n\n    case 'object':\n      return setLastValue(currentValue, {\n        type: 'object',\n        key: '',\n        last: true\n      }, currentValue[''], entryValue);\n\n    case 'scalar':\n      context[step.key] = [context[step.key], entryValue];\n      break;\n  }\n\n  return context;\n}\n\nfunction setValue(context, step, currentValue, entryValue) {\n  if (step.last) return setLastValue(context, step, currentValue, entryValue);\n  var obj;\n\n  switch (valueType(currentValue)) {\n    case 'undefined':\n      if (step.nextType === 'array') {\n        context[step.key] = [];\n      } else {\n        context[step.key] = Object.create(null);\n      }\n\n      return context[step.key];\n\n    case 'object':\n      return context[step.key];\n\n    case 'array':\n      if (step.nextType === 'array') {\n        return currentValue;\n      }\n\n      obj = Object.create(null);\n      context[step.key] = obj;\n      currentValue.forEach(function (item, i) {\n        if (item !== undefined) obj['' + i] = item;\n      });\n      return obj;\n\n    case 'scalar':\n      obj = Object.create(null);\n      obj[''] = currentValue;\n      context[step.key] = obj;\n      return obj;\n  }\n}\n\nmodule.exports = setValue;","map":{"version":3,"names":["valueType","value","undefined","Array","isArray","setLastValue","context","step","currentValue","entryValue","append","key","push","type","last","setValue","obj","nextType","Object","create","forEach","item","i","module","exports"],"sources":["C:/Users/apinto2/Desktop/teswordtomd/12 setembro/UPLOAD 9/turorials/server/node_modules/append-field/lib/set-value.js"],"sourcesContent":["function valueType (value) {\n  if (value === undefined) return 'undefined'\n  if (Array.isArray(value)) return 'array'\n  if (typeof value === 'object') return 'object'\n  return 'scalar'\n}\n\nfunction setLastValue (context, step, currentValue, entryValue) {\n  switch (valueType(currentValue)) {\n    case 'undefined':\n      if (step.append) {\n        context[step.key] = [entryValue]\n      } else {\n        context[step.key] = entryValue\n      }\n      break\n    case 'array':\n      context[step.key].push(entryValue)\n      break\n    case 'object':\n      return setLastValue(currentValue, { type: 'object', key: '', last: true }, currentValue[''], entryValue)\n    case 'scalar':\n      context[step.key] = [context[step.key], entryValue]\n      break\n  }\n\n  return context\n}\n\nfunction setValue (context, step, currentValue, entryValue) {\n  if (step.last) return setLastValue(context, step, currentValue, entryValue)\n\n  var obj\n  switch (valueType(currentValue)) {\n    case 'undefined':\n      if (step.nextType === 'array') {\n        context[step.key] = []\n      } else {\n        context[step.key] = Object.create(null)\n      }\n      return context[step.key]\n    case 'object':\n      return context[step.key]\n    case 'array':\n      if (step.nextType === 'array') {\n        return currentValue\n      }\n\n      obj = Object.create(null)\n      context[step.key] = obj\n      currentValue.forEach(function (item, i) {\n        if (item !== undefined) obj['' + i] = item\n      })\n\n      return obj\n    case 'scalar':\n      obj = Object.create(null)\n      obj[''] = currentValue\n      context[step.key] = obj\n      return obj\n  }\n}\n\nmodule.exports = setValue\n"],"mappings":"AAAA,SAASA,SAAT,CAAoBC,KAApB,EAA2B;EACzB,IAAIA,KAAK,KAAKC,SAAd,EAAyB,OAAO,WAAP;EACzB,IAAIC,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAJ,EAA0B,OAAO,OAAP;EAC1B,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B,OAAO,QAAP;EAC/B,OAAO,QAAP;AACD;;AAED,SAASI,YAAT,CAAuBC,OAAvB,EAAgCC,IAAhC,EAAsCC,YAAtC,EAAoDC,UAApD,EAAgE;EAC9D,QAAQT,SAAS,CAACQ,YAAD,CAAjB;IACE,KAAK,WAAL;MACE,IAAID,IAAI,CAACG,MAAT,EAAiB;QACfJ,OAAO,CAACC,IAAI,CAACI,GAAN,CAAP,GAAoB,CAACF,UAAD,CAApB;MACD,CAFD,MAEO;QACLH,OAAO,CAACC,IAAI,CAACI,GAAN,CAAP,GAAoBF,UAApB;MACD;;MACD;;IACF,KAAK,OAAL;MACEH,OAAO,CAACC,IAAI,CAACI,GAAN,CAAP,CAAkBC,IAAlB,CAAuBH,UAAvB;MACA;;IACF,KAAK,QAAL;MACE,OAAOJ,YAAY,CAACG,YAAD,EAAe;QAAEK,IAAI,EAAE,QAAR;QAAkBF,GAAG,EAAE,EAAvB;QAA2BG,IAAI,EAAE;MAAjC,CAAf,EAAwDN,YAAY,CAAC,EAAD,CAApE,EAA0EC,UAA1E,CAAnB;;IACF,KAAK,QAAL;MACEH,OAAO,CAACC,IAAI,CAACI,GAAN,CAAP,GAAoB,CAACL,OAAO,CAACC,IAAI,CAACI,GAAN,CAAR,EAAoBF,UAApB,CAApB;MACA;EAfJ;;EAkBA,OAAOH,OAAP;AACD;;AAED,SAASS,QAAT,CAAmBT,OAAnB,EAA4BC,IAA5B,EAAkCC,YAAlC,EAAgDC,UAAhD,EAA4D;EAC1D,IAAIF,IAAI,CAACO,IAAT,EAAe,OAAOT,YAAY,CAACC,OAAD,EAAUC,IAAV,EAAgBC,YAAhB,EAA8BC,UAA9B,CAAnB;EAEf,IAAIO,GAAJ;;EACA,QAAQhB,SAAS,CAACQ,YAAD,CAAjB;IACE,KAAK,WAAL;MACE,IAAID,IAAI,CAACU,QAAL,KAAkB,OAAtB,EAA+B;QAC7BX,OAAO,CAACC,IAAI,CAACI,GAAN,CAAP,GAAoB,EAApB;MACD,CAFD,MAEO;QACLL,OAAO,CAACC,IAAI,CAACI,GAAN,CAAP,GAAoBO,MAAM,CAACC,MAAP,CAAc,IAAd,CAApB;MACD;;MACD,OAAOb,OAAO,CAACC,IAAI,CAACI,GAAN,CAAd;;IACF,KAAK,QAAL;MACE,OAAOL,OAAO,CAACC,IAAI,CAACI,GAAN,CAAd;;IACF,KAAK,OAAL;MACE,IAAIJ,IAAI,CAACU,QAAL,KAAkB,OAAtB,EAA+B;QAC7B,OAAOT,YAAP;MACD;;MAEDQ,GAAG,GAAGE,MAAM,CAACC,MAAP,CAAc,IAAd,CAAN;MACAb,OAAO,CAACC,IAAI,CAACI,GAAN,CAAP,GAAoBK,GAApB;MACAR,YAAY,CAACY,OAAb,CAAqB,UAAUC,IAAV,EAAgBC,CAAhB,EAAmB;QACtC,IAAID,IAAI,KAAKnB,SAAb,EAAwBc,GAAG,CAAC,KAAKM,CAAN,CAAH,GAAcD,IAAd;MACzB,CAFD;MAIA,OAAOL,GAAP;;IACF,KAAK,QAAL;MACEA,GAAG,GAAGE,MAAM,CAACC,MAAP,CAAc,IAAd,CAAN;MACAH,GAAG,CAAC,EAAD,CAAH,GAAUR,YAAV;MACAF,OAAO,CAACC,IAAI,CAACI,GAAN,CAAP,GAAoBK,GAApB;MACA,OAAOA,GAAP;EA1BJ;AA4BD;;AAEDO,MAAM,CAACC,OAAP,GAAiBT,QAAjB"},"metadata":{},"sourceType":"script"}