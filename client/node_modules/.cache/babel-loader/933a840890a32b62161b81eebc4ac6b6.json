{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar Fullscreen = props => {\n  var {\n    editorProps\n  } = props;\n  var $height = useRef(0);\n  var [full, setFull] = useState(false);\n  useEffect(() => {\n    if (editorProps.containerEditor && editorProps.containerEditor.current && editorProps.containerEditor.current.parentElement) {\n      var parentElement = editorProps.containerEditor.current.parentElement;\n      var robserver = new ResizeObserver(entries => {\n        for (var entry of entries) {\n          var _editorProps$editor, _editorProps$editor$c, _editorProps$editor$c2;\n\n          if (!$height.current) {\n            $height.current = entry.target.clientHeight;\n          }\n\n          if ((_editorProps$editor = editorProps.editor) != null && (_editorProps$editor$c = _editorProps$editor.current) != null && (_editorProps$editor$c2 = _editorProps$editor$c.view) != null && _editorProps$editor$c2.dom) {\n            if (full) {\n              editorProps.editor.current.view.dom.style.height = entry.target.clientHeight + \"px\";\n            } else {\n              editorProps.editor.current.view.dom.removeAttribute('style');\n            }\n          }\n        }\n      });\n      robserver.observe(parentElement);\n    }\n  }, [editorProps.containerEditor, editorProps.editor, full]);\n  useEffect(() => {\n    if (!document) return;\n\n    if (editorProps && editorProps.container && editorProps.container.current && editorProps.editor) {\n      var container = editorProps.container.current;\n      document.body.style.overflow = full ? 'hidden' : 'initial';\n\n      if (container && full) {\n        container.style.zIndex = '999';\n        container.style.position = 'fixed';\n        container.style.top = '0px';\n        container.style.bottom = '0px';\n        container.style.left = '0px';\n        container.style.right = '0px';\n      } else if (container) {\n        container.style.position = 'initial';\n        container.style.top = 'initial';\n        container.style.bottom = 'initial';\n        container.style.left = 'initial';\n        container.style.right = 'initial';\n      }\n    }\n  }, [full, editorProps]);\n  return /*#__PURE__*/_jsx(\"button\", {\n    onClick: () => setFull(!full),\n    type: \"button\",\n    className: full ? 'active' : '',\n    children: props.command.icon\n  });\n};\n\nexport var fullscreen = {\n  name: 'fullscreen',\n  keyCommand: 'fullscreen',\n  button: (command, props, opts) => /*#__PURE__*/_jsx(Fullscreen, {\n    command: command,\n    editorProps: _extends({}, props, opts)\n  }),\n  icon: /*#__PURE__*/_jsx(\"svg\", {\n    fill: \"currentColor\",\n    viewBox: \"0 0 448 512\",\n    height: \"15\",\n    width: \"15\",\n    children: /*#__PURE__*/_jsx(\"path\", {\n      d: \"M128 32H32C14.31 32 0 46.31 0 64v96c0 17.69 14.31 32 32 32s32-14.31 32-32V96h64c17.69 0 32-14.31 32-32s-14.3-32-32-32zm288 0h-96c-17.69 0-32 14.31-32 32s14.31 32 32 32h64v64c0 17.69 14.31 32 32 32s32-14.31 32-32V64c0-17.69-14.3-32-32-32zM128 416H64v-64c0-17.69-14.31-32-32-32S0 334.31 0 352v96c0 17.69 14.31 32 32 32h96c17.69 0 32-14.31 32-32s-14.3-32-32-32zm288-96c-17.69 0-32 14.31-32 32v64h-64c-17.69 0-32 14.31-32 32s14.31 32 32 32h96c17.69 0 32-14.31 32-32v-96c0-17.7-14.3-32-32-32z\"\n    })\n  })\n};","map":{"version":3,"sources":["../../src/commands/fullscreen.tsx"],"names":["Fullscreen","props","editorProps","$height","useRef","useState","useEffect","parentElement","robserver","entries","entry","container","document","full","setFull","icon","fullscreen","name","keyCommand","button"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { ICommand } from './';\nimport { IMarkdownEditor, ToolBarProps } from '../';\n\nconst Fullscreen: React.FC<{ command: ICommand; editorProps: IMarkdownEditor & ToolBarProps }> = (props) => {\n  const { editorProps } = props;\n  const $height = useRef<number>(0);\n  const [full, setFull] = useState(false);\n  useEffect(() => {\n    if (\n      editorProps.containerEditor &&\n      editorProps.containerEditor.current &&\n      editorProps.containerEditor.current.parentElement\n    ) {\n      const parentElement = editorProps.containerEditor.current.parentElement;\n      const robserver = new ResizeObserver((entries) => {\n        for (const entry of entries) {\n          if (!$height.current) {\n            $height.current = entry.target.clientHeight;\n          }\n          if (editorProps.editor?.current?.view?.dom) {\n            if (full) {\n              editorProps.editor.current.view.dom.style.height = `${entry.target.clientHeight}px`;\n            } else {\n              editorProps.editor.current.view.dom.removeAttribute('style');\n            }\n          }\n        }\n      });\n      robserver.observe(parentElement);\n    }\n  }, [editorProps.containerEditor, editorProps.editor, full]);\n\n  useEffect(() => {\n    if (!document) return;\n    if (editorProps && editorProps.container && editorProps.container.current && editorProps.editor) {\n      const container = editorProps.container.current;\n      document.body.style.overflow = full ? 'hidden' : 'initial';\n      if (container && full) {\n        container.style.zIndex = '999';\n        container.style.position = 'fixed';\n        container.style.top = '0px';\n        container.style.bottom = '0px';\n        container.style.left = '0px';\n        container.style.right = '0px';\n      } else if (container) {\n        container.style.position = 'initial';\n        container.style.top = 'initial';\n        container.style.bottom = 'initial';\n        container.style.left = 'initial';\n        container.style.right = 'initial';\n      }\n    }\n  }, [full, editorProps]);\n\n  return (\n    <button onClick={() => setFull(!full)} type=\"button\" className={full ? 'active' : ''}>\n      {props.command.icon}\n    </button>\n  );\n};\n\nexport const fullscreen: ICommand = {\n  name: 'fullscreen',\n  keyCommand: 'fullscreen',\n  button: (command, props, opts) => <Fullscreen command={command} editorProps={{ ...props, ...opts }} />,\n  icon: (\n    <svg fill=\"currentColor\" viewBox=\"0 0 448 512\" height=\"15\" width=\"15\">\n      <path d=\"M128 32H32C14.31 32 0 46.31 0 64v96c0 17.69 14.31 32 32 32s32-14.31 32-32V96h64c17.69 0 32-14.31 32-32s-14.3-32-32-32zm288 0h-96c-17.69 0-32 14.31-32 32s14.31 32 32 32h64v64c0 17.69 14.31 32 32 32s32-14.31 32-32V64c0-17.69-14.3-32-32-32zM128 416H64v-64c0-17.69-14.31-32-32-32S0 334.31 0 352v96c0 17.69 14.31 32 32 32h96c17.69 0 32-14.31 32-32s-14.3-32-32-32zm288-96c-17.69 0-32 14.31-32 32v64h-64c-17.69 0-32 14.31-32 32s14.31 32 32 32h96c17.69 0 32-14.31 32-32v-96c0-17.7-14.3-32-32-32z\" />\n    </svg>\n  ),\n};\n"]},"metadata":{},"sourceType":"module"}