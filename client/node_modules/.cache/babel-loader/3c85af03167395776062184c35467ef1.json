{"ast":null,"code":"var WritableStream = require('stream').Writable || require('readable-stream').Writable,\n    inherits = require('util').inherits;\n\nvar StreamSearch = require('streamsearch');\n\nvar PartStream = require('./PartStream'),\n    HeaderParser = require('./HeaderParser');\n\nvar DASH = 45,\n    B_ONEDASH = new Buffer('-'),\n    B_CRLF = new Buffer('\\r\\n'),\n    EMPTY_FN = function () {};\n\nfunction Dicer(cfg) {\n  if (!(this instanceof Dicer)) return new Dicer(cfg);\n  WritableStream.call(this, cfg);\n  if (!cfg || !cfg.headerFirst && typeof cfg.boundary !== 'string') throw new TypeError('Boundary required');\n  if (typeof cfg.boundary === 'string') this.setBoundary(cfg.boundary);else this._bparser = undefined;\n  this._headerFirst = cfg.headerFirst;\n  var self = this;\n  this._dashes = 0;\n  this._parts = 0;\n  this._finished = false;\n  this._realFinish = false;\n  this._isPreamble = true;\n  this._justMatched = false;\n  this._firstWrite = true;\n  this._inHeader = true;\n  this._part = undefined;\n  this._cb = undefined;\n  this._ignoreData = false;\n  this._partOpts = typeof cfg.partHwm === 'number' ? {\n    highWaterMark: cfg.partHwm\n  } : {};\n  this._pause = false;\n  this._hparser = new HeaderParser(cfg);\n\n  this._hparser.on('header', function (header) {\n    self._inHeader = false;\n\n    self._part.emit('header', header);\n  });\n}\n\ninherits(Dicer, WritableStream);\n\nDicer.prototype.emit = function (ev) {\n  if (ev === 'finish' && !this._realFinish) {\n    if (!this._finished) {\n      var self = this;\n      process.nextTick(function () {\n        self.emit('error', new Error('Unexpected end of multipart data'));\n\n        if (self._part && !self._ignoreData) {\n          var type = self._isPreamble ? 'Preamble' : 'Part';\n\n          self._part.emit('error', new Error(type + ' terminated early due to unexpected end of multipart data'));\n\n          self._part.push(null);\n\n          process.nextTick(function () {\n            self._realFinish = true;\n            self.emit('finish');\n            self._realFinish = false;\n          });\n          return;\n        }\n\n        self._realFinish = true;\n        self.emit('finish');\n        self._realFinish = false;\n      });\n    }\n  } else WritableStream.prototype.emit.apply(this, arguments);\n};\n\nDicer.prototype._write = function (data, encoding, cb) {\n  // ignore unexpected data (e.g. extra trailer data after finished)\n  if (!this._hparser && !this._bparser) return cb();\n\n  if (this._headerFirst && this._isPreamble) {\n    if (!this._part) {\n      this._part = new PartStream(this._partOpts);\n      if (this._events.preamble) this.emit('preamble', this._part);else this._ignore();\n    }\n\n    var r = this._hparser.push(data);\n\n    if (!this._inHeader && r !== undefined && r < data.length) data = data.slice(r);else return cb();\n  } // allows for \"easier\" testing\n\n\n  if (this._firstWrite) {\n    this._bparser.push(B_CRLF);\n\n    this._firstWrite = false;\n  }\n\n  this._bparser.push(data);\n\n  if (this._pause) this._cb = cb;else cb();\n};\n\nDicer.prototype.reset = function () {\n  this._part = undefined;\n  this._bparser = undefined;\n  this._hparser = undefined;\n};\n\nDicer.prototype.setBoundary = function (boundary) {\n  var self = this;\n  this._bparser = new StreamSearch('\\r\\n--' + boundary);\n\n  this._bparser.on('info', function (isMatch, data, start, end) {\n    self._oninfo(isMatch, data, start, end);\n  });\n};\n\nDicer.prototype._ignore = function () {\n  if (this._part && !this._ignoreData) {\n    this._ignoreData = true;\n\n    this._part.on('error', EMPTY_FN); // we must perform some kind of read on the stream even though we are\n    // ignoring the data, otherwise node's Readable stream will not emit 'end'\n    // after pushing null to the stream\n\n\n    this._part.resume();\n  }\n};\n\nDicer.prototype._oninfo = function (isMatch, data, start, end) {\n  var buf,\n      self = this,\n      i = 0,\n      r,\n      ev,\n      shouldWriteMore = true;\n\n  if (!this._part && this._justMatched && data) {\n    while (this._dashes < 2 && start + i < end) {\n      if (data[start + i] === DASH) {\n        ++i;\n        ++this._dashes;\n      } else {\n        if (this._dashes) buf = B_ONEDASH;\n        this._dashes = 0;\n        break;\n      }\n    }\n\n    if (this._dashes === 2) {\n      if (start + i < end && this._events.trailer) this.emit('trailer', data.slice(start + i, end));\n      this.reset();\n      this._finished = true; // no more parts will be added\n\n      if (self._parts === 0) {\n        self._realFinish = true;\n        self.emit('finish');\n        self._realFinish = false;\n      }\n    }\n\n    if (this._dashes) return;\n  }\n\n  if (this._justMatched) this._justMatched = false;\n\n  if (!this._part) {\n    this._part = new PartStream(this._partOpts);\n\n    this._part._read = function (n) {\n      self._unpause();\n    };\n\n    ev = this._isPreamble ? 'preamble' : 'part';\n    if (this._events[ev]) this.emit(ev, this._part);else this._ignore();\n    if (!this._isPreamble) this._inHeader = true;\n  }\n\n  if (data && start < end && !this._ignoreData) {\n    if (this._isPreamble || !this._inHeader) {\n      if (buf) shouldWriteMore = this._part.push(buf);\n      shouldWriteMore = this._part.push(data.slice(start, end));\n      if (!shouldWriteMore) this._pause = true;\n    } else if (!this._isPreamble && this._inHeader) {\n      if (buf) this._hparser.push(buf);\n      r = this._hparser.push(data.slice(start, end));\n      if (!this._inHeader && r !== undefined && r < end) this._oninfo(false, data, start + r, end);\n    }\n  }\n\n  if (isMatch) {\n    this._hparser.reset();\n\n    if (this._isPreamble) this._isPreamble = false;else {\n      ++this._parts;\n\n      this._part.on('end', function () {\n        if (--self._parts === 0) {\n          if (self._finished) {\n            self._realFinish = true;\n            self.emit('finish');\n            self._realFinish = false;\n          } else {\n            self._unpause();\n          }\n        }\n      });\n    }\n\n    this._part.push(null);\n\n    this._part = undefined;\n    this._ignoreData = false;\n    this._justMatched = true;\n    this._dashes = 0;\n  }\n};\n\nDicer.prototype._unpause = function () {\n  if (!this._pause) return;\n  this._pause = false;\n\n  if (this._cb) {\n    var cb = this._cb;\n    this._cb = undefined;\n    cb();\n  }\n};\n\nmodule.exports = Dicer;","map":{"version":3,"names":["WritableStream","require","Writable","inherits","StreamSearch","PartStream","HeaderParser","DASH","B_ONEDASH","Buffer","B_CRLF","EMPTY_FN","Dicer","cfg","call","headerFirst","boundary","TypeError","setBoundary","_bparser","undefined","_headerFirst","self","_dashes","_parts","_finished","_realFinish","_isPreamble","_justMatched","_firstWrite","_inHeader","_part","_cb","_ignoreData","_partOpts","partHwm","highWaterMark","_pause","_hparser","on","header","emit","prototype","ev","process","nextTick","Error","type","push","apply","arguments","_write","data","encoding","cb","_events","preamble","_ignore","r","length","slice","reset","isMatch","start","end","_oninfo","resume","buf","i","shouldWriteMore","trailer","_read","n","_unpause","module","exports"],"sources":["C:/Users/apinto2/Desktop/teswordtomd/12 setembro/UPLOAD 9/turorials/server/node_modules/dicer/lib/Dicer.js"],"sourcesContent":["var WritableStream = require('stream').Writable\n                     || require('readable-stream').Writable,\n    inherits = require('util').inherits;\n\nvar StreamSearch = require('streamsearch');\n\nvar PartStream = require('./PartStream'),\n    HeaderParser = require('./HeaderParser');\n\nvar DASH = 45,\n    B_ONEDASH = new Buffer('-'),\n    B_CRLF = new Buffer('\\r\\n'),\n    EMPTY_FN = function() {};\n\nfunction Dicer(cfg) {\n  if (!(this instanceof Dicer))\n    return new Dicer(cfg);\n  WritableStream.call(this, cfg);\n\n  if (!cfg || (!cfg.headerFirst && typeof cfg.boundary !== 'string'))\n    throw new TypeError('Boundary required');\n\n  if (typeof cfg.boundary === 'string')\n    this.setBoundary(cfg.boundary);\n  else\n    this._bparser = undefined;\n\n  this._headerFirst = cfg.headerFirst;\n\n  var self = this;\n\n  this._dashes = 0;\n  this._parts = 0;\n  this._finished = false;\n  this._realFinish = false;\n  this._isPreamble = true;\n  this._justMatched = false;\n  this._firstWrite = true;\n  this._inHeader = true;\n  this._part = undefined;\n  this._cb = undefined;\n  this._ignoreData = false;\n  this._partOpts = (typeof cfg.partHwm === 'number'\n                    ? { highWaterMark: cfg.partHwm }\n                    : {});\n  this._pause = false;\n\n  this._hparser = new HeaderParser(cfg);\n  this._hparser.on('header', function(header) {\n    self._inHeader = false;\n    self._part.emit('header', header);\n  });\n\n}\ninherits(Dicer, WritableStream);\n\nDicer.prototype.emit = function(ev) {\n  if (ev === 'finish' && !this._realFinish) {\n    if (!this._finished) {\n      var self = this;\n      process.nextTick(function() {\n        self.emit('error', new Error('Unexpected end of multipart data'));\n        if (self._part && !self._ignoreData) {\n          var type = (self._isPreamble ? 'Preamble' : 'Part');\n          self._part.emit('error', new Error(type + ' terminated early due to unexpected end of multipart data'));\n          self._part.push(null);\n          process.nextTick(function() {\n            self._realFinish = true;\n            self.emit('finish');\n            self._realFinish = false;\n          });\n          return;\n        }\n        self._realFinish = true;\n        self.emit('finish');\n        self._realFinish = false;\n      });\n    }\n  } else\n    WritableStream.prototype.emit.apply(this, arguments);\n};\n\nDicer.prototype._write = function(data, encoding, cb) {\n  // ignore unexpected data (e.g. extra trailer data after finished)\n  if (!this._hparser && !this._bparser)\n    return cb();\n\n  if (this._headerFirst && this._isPreamble) {\n    if (!this._part) {\n      this._part = new PartStream(this._partOpts);\n      if (this._events.preamble)\n        this.emit('preamble', this._part);\n      else\n        this._ignore();\n    }\n    var r = this._hparser.push(data);\n    if (!this._inHeader && r !== undefined && r < data.length)\n      data = data.slice(r);\n    else\n      return cb();\n  }\n\n  // allows for \"easier\" testing\n  if (this._firstWrite) {\n    this._bparser.push(B_CRLF);\n    this._firstWrite = false;\n  }\n\n  this._bparser.push(data);\n\n  if (this._pause)\n    this._cb = cb;\n  else\n    cb();\n};\n\nDicer.prototype.reset = function() {\n  this._part = undefined;\n  this._bparser = undefined;\n  this._hparser = undefined;\n};\n\nDicer.prototype.setBoundary = function(boundary) {\n  var self = this;\n  this._bparser = new StreamSearch('\\r\\n--' + boundary);\n  this._bparser.on('info', function(isMatch, data, start, end) {\n    self._oninfo(isMatch, data, start, end);\n  });\n};\n\nDicer.prototype._ignore = function() {\n  if (this._part && !this._ignoreData) {\n    this._ignoreData = true;\n    this._part.on('error', EMPTY_FN);\n    // we must perform some kind of read on the stream even though we are\n    // ignoring the data, otherwise node's Readable stream will not emit 'end'\n    // after pushing null to the stream\n    this._part.resume();\n  }\n};\n\nDicer.prototype._oninfo = function(isMatch, data, start, end) {\n  var buf, self = this, i = 0, r, ev, shouldWriteMore = true;\n\n  if (!this._part && this._justMatched && data) {\n    while (this._dashes < 2 && (start + i) < end) {\n      if (data[start + i] === DASH) {\n        ++i;\n        ++this._dashes;\n      } else {\n        if (this._dashes)\n          buf = B_ONEDASH;\n        this._dashes = 0;\n        break;\n      }\n    }\n    if (this._dashes === 2) {\n      if ((start + i) < end && this._events.trailer)\n        this.emit('trailer', data.slice(start + i, end));\n      this.reset();\n      this._finished = true;\n      // no more parts will be added\n      if (self._parts === 0) {\n        self._realFinish = true;\n        self.emit('finish');\n        self._realFinish = false;\n      }\n    }\n    if (this._dashes)\n      return;\n  }\n  if (this._justMatched)\n    this._justMatched = false;\n  if (!this._part) {\n    this._part = new PartStream(this._partOpts);\n    this._part._read = function(n) {\n      self._unpause();\n    };\n    ev = this._isPreamble ? 'preamble' : 'part';\n    if (this._events[ev])\n      this.emit(ev, this._part);\n    else\n      this._ignore();\n    if (!this._isPreamble)\n      this._inHeader = true;\n  }\n  if (data && start < end && !this._ignoreData) {\n    if (this._isPreamble || !this._inHeader) {\n      if (buf)\n        shouldWriteMore = this._part.push(buf);\n      shouldWriteMore = this._part.push(data.slice(start, end));\n      if (!shouldWriteMore)\n        this._pause = true;\n    } else if (!this._isPreamble && this._inHeader) {\n      if (buf)\n        this._hparser.push(buf);\n      r = this._hparser.push(data.slice(start, end));\n      if (!this._inHeader && r !== undefined && r < end)\n        this._oninfo(false, data, start + r, end);\n    }\n  }\n  if (isMatch) {\n    this._hparser.reset();\n    if (this._isPreamble)\n      this._isPreamble = false;\n    else {\n      ++this._parts;\n      this._part.on('end', function() {\n        if (--self._parts === 0) {\n          if (self._finished) {\n            self._realFinish = true;\n            self.emit('finish');\n            self._realFinish = false;\n          } else {\n            self._unpause();\n          }\n        }\n      });\n    }\n    this._part.push(null);\n    this._part = undefined;\n    this._ignoreData = false;\n    this._justMatched = true;\n    this._dashes = 0;\n  }\n};\n\nDicer.prototype._unpause = function() {\n  if (!this._pause)\n    return;\n\n  this._pause = false;\n  if (this._cb) {\n    var cb = this._cb;\n    this._cb = undefined;\n    cb();\n  }\n};\n\nmodule.exports = Dicer;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}