{"ast":null,"code":"var objectAssign = require('object-assign');\n\nfunction arrayRemove(arr, item) {\n  var idx = arr.indexOf(item);\n  if (~idx) arr.splice(idx, 1);\n}\n\nfunction FileAppender(strategy, req) {\n  this.strategy = strategy;\n  this.req = req;\n\n  switch (strategy) {\n    case 'NONE':\n      break;\n\n    case 'VALUE':\n      break;\n\n    case 'ARRAY':\n      req.files = [];\n      break;\n\n    case 'OBJECT':\n      req.files = Object.create(null);\n      break;\n\n    default:\n      throw new Error('Unknown file strategy: ' + strategy);\n  }\n}\n\nFileAppender.prototype.insertPlaceholder = function (file) {\n  var placeholder = {\n    fieldname: file.fieldname\n  };\n\n  switch (this.strategy) {\n    case 'NONE':\n      break;\n\n    case 'VALUE':\n      break;\n\n    case 'ARRAY':\n      this.req.files.push(placeholder);\n      break;\n\n    case 'OBJECT':\n      if (this.req.files[file.fieldname]) {\n        this.req.files[file.fieldname].push(placeholder);\n      } else {\n        this.req.files[file.fieldname] = [placeholder];\n      }\n\n      break;\n  }\n\n  return placeholder;\n};\n\nFileAppender.prototype.removePlaceholder = function (placeholder) {\n  switch (this.strategy) {\n    case 'NONE':\n      break;\n\n    case 'VALUE':\n      break;\n\n    case 'ARRAY':\n      arrayRemove(this.req.files, placeholder);\n      break;\n\n    case 'OBJECT':\n      if (this.req.files[placeholder.fieldname].length === 1) {\n        delete this.req.files[placeholder.fieldname];\n      } else {\n        arrayRemove(this.req.files[placeholder.fieldname], placeholder);\n      }\n\n      break;\n  }\n};\n\nFileAppender.prototype.replacePlaceholder = function (placeholder, file) {\n  if (this.strategy === 'VALUE') {\n    this.req.file = file;\n    return;\n  }\n\n  delete placeholder.fieldname;\n  objectAssign(placeholder, file);\n};\n\nmodule.exports = FileAppender;","map":{"version":3,"names":["objectAssign","require","arrayRemove","arr","item","idx","indexOf","splice","FileAppender","strategy","req","files","Object","create","Error","prototype","insertPlaceholder","file","placeholder","fieldname","push","removePlaceholder","length","replacePlaceholder","module","exports"],"sources":["C:/Users/apinto2/Desktop/teswordtomd/12 setembro/UPLOAD 9/turorials/server/node_modules/multer/lib/file-appender.js"],"sourcesContent":["var objectAssign = require('object-assign')\n\nfunction arrayRemove (arr, item) {\n  var idx = arr.indexOf(item)\n  if (~idx) arr.splice(idx, 1)\n}\n\nfunction FileAppender (strategy, req) {\n  this.strategy = strategy\n  this.req = req\n\n  switch (strategy) {\n    case 'NONE': break\n    case 'VALUE': break\n    case 'ARRAY': req.files = []; break\n    case 'OBJECT': req.files = Object.create(null); break\n    default: throw new Error('Unknown file strategy: ' + strategy)\n  }\n}\n\nFileAppender.prototype.insertPlaceholder = function (file) {\n  var placeholder = {\n    fieldname: file.fieldname\n  }\n\n  switch (this.strategy) {\n    case 'NONE': break\n    case 'VALUE': break\n    case 'ARRAY': this.req.files.push(placeholder); break\n    case 'OBJECT':\n      if (this.req.files[file.fieldname]) {\n        this.req.files[file.fieldname].push(placeholder)\n      } else {\n        this.req.files[file.fieldname] = [placeholder]\n      }\n      break\n  }\n\n  return placeholder\n}\n\nFileAppender.prototype.removePlaceholder = function (placeholder) {\n  switch (this.strategy) {\n    case 'NONE': break\n    case 'VALUE': break\n    case 'ARRAY': arrayRemove(this.req.files, placeholder); break\n    case 'OBJECT':\n      if (this.req.files[placeholder.fieldname].length === 1) {\n        delete this.req.files[placeholder.fieldname]\n      } else {\n        arrayRemove(this.req.files[placeholder.fieldname], placeholder)\n      }\n      break\n  }\n}\n\nFileAppender.prototype.replacePlaceholder = function (placeholder, file) {\n  if (this.strategy === 'VALUE') {\n    this.req.file = file\n    return\n  }\n\n  delete placeholder.fieldname\n  objectAssign(placeholder, file)\n}\n\nmodule.exports = FileAppender\n"],"mappings":"AAAA,IAAIA,YAAY,GAAGC,OAAO,CAAC,eAAD,CAA1B;;AAEA,SAASC,WAAT,CAAsBC,GAAtB,EAA2BC,IAA3B,EAAiC;EAC/B,IAAIC,GAAG,GAAGF,GAAG,CAACG,OAAJ,CAAYF,IAAZ,CAAV;EACA,IAAI,CAACC,GAAL,EAAUF,GAAG,CAACI,MAAJ,CAAWF,GAAX,EAAgB,CAAhB;AACX;;AAED,SAASG,YAAT,CAAuBC,QAAvB,EAAiCC,GAAjC,EAAsC;EACpC,KAAKD,QAAL,GAAgBA,QAAhB;EACA,KAAKC,GAAL,GAAWA,GAAX;;EAEA,QAAQD,QAAR;IACE,KAAK,MAAL;MAAa;;IACb,KAAK,OAAL;MAAc;;IACd,KAAK,OAAL;MAAcC,GAAG,CAACC,KAAJ,GAAY,EAAZ;MAAgB;;IAC9B,KAAK,QAAL;MAAeD,GAAG,CAACC,KAAJ,GAAYC,MAAM,CAACC,MAAP,CAAc,IAAd,CAAZ;MAAiC;;IAChD;MAAS,MAAM,IAAIC,KAAJ,CAAU,4BAA4BL,QAAtC,CAAN;EALX;AAOD;;AAEDD,YAAY,CAACO,SAAb,CAAuBC,iBAAvB,GAA2C,UAAUC,IAAV,EAAgB;EACzD,IAAIC,WAAW,GAAG;IAChBC,SAAS,EAAEF,IAAI,CAACE;EADA,CAAlB;;EAIA,QAAQ,KAAKV,QAAb;IACE,KAAK,MAAL;MAAa;;IACb,KAAK,OAAL;MAAc;;IACd,KAAK,OAAL;MAAc,KAAKC,GAAL,CAASC,KAAT,CAAeS,IAAf,CAAoBF,WAApB;MAAkC;;IAChD,KAAK,QAAL;MACE,IAAI,KAAKR,GAAL,CAASC,KAAT,CAAeM,IAAI,CAACE,SAApB,CAAJ,EAAoC;QAClC,KAAKT,GAAL,CAASC,KAAT,CAAeM,IAAI,CAACE,SAApB,EAA+BC,IAA/B,CAAoCF,WAApC;MACD,CAFD,MAEO;QACL,KAAKR,GAAL,CAASC,KAAT,CAAeM,IAAI,CAACE,SAApB,IAAiC,CAACD,WAAD,CAAjC;MACD;;MACD;EAVJ;;EAaA,OAAOA,WAAP;AACD,CAnBD;;AAqBAV,YAAY,CAACO,SAAb,CAAuBM,iBAAvB,GAA2C,UAAUH,WAAV,EAAuB;EAChE,QAAQ,KAAKT,QAAb;IACE,KAAK,MAAL;MAAa;;IACb,KAAK,OAAL;MAAc;;IACd,KAAK,OAAL;MAAcP,WAAW,CAAC,KAAKQ,GAAL,CAASC,KAAV,EAAiBO,WAAjB,CAAX;MAA0C;;IACxD,KAAK,QAAL;MACE,IAAI,KAAKR,GAAL,CAASC,KAAT,CAAeO,WAAW,CAACC,SAA3B,EAAsCG,MAAtC,KAAiD,CAArD,EAAwD;QACtD,OAAO,KAAKZ,GAAL,CAASC,KAAT,CAAeO,WAAW,CAACC,SAA3B,CAAP;MACD,CAFD,MAEO;QACLjB,WAAW,CAAC,KAAKQ,GAAL,CAASC,KAAT,CAAeO,WAAW,CAACC,SAA3B,CAAD,EAAwCD,WAAxC,CAAX;MACD;;MACD;EAVJ;AAYD,CAbD;;AAeAV,YAAY,CAACO,SAAb,CAAuBQ,kBAAvB,GAA4C,UAAUL,WAAV,EAAuBD,IAAvB,EAA6B;EACvE,IAAI,KAAKR,QAAL,KAAkB,OAAtB,EAA+B;IAC7B,KAAKC,GAAL,CAASO,IAAT,GAAgBA,IAAhB;IACA;EACD;;EAED,OAAOC,WAAW,CAACC,SAAnB;EACAnB,YAAY,CAACkB,WAAD,EAAcD,IAAd,CAAZ;AACD,CARD;;AAUAO,MAAM,CAACC,OAAP,GAAiBjB,YAAjB"},"metadata":{},"sourceType":"script"}