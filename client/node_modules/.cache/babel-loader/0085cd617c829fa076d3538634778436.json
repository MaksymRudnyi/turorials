{"ast":null,"code":"import { visit } from 'unist-util-visit';\n\nconst rehypeIgnore = function () {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    openDelimiter = 'rehype:ignore:start',\n    closeDelimiter = 'rehype:ignore:end'\n  } = options;\n  return tree => {\n    visit(tree, (node, index, parent) => {\n      if (node.type === 'element' || node.type === 'root') {\n        // const start = node.children.findIndex((item) => item.type === 'comment' && item.value === openDelimiter);\n        // const end = node.children.findIndex((item) => item.type === 'comment' && item.value === closeDelimiter);\n        // if (start > -1 && end > -1) {\n        //   node.children = node.children.filter((_, idx) => idx < start || idx > end);\n        // }\n        let start = false;\n        node.children = node.children.filter(item => {\n          if (item.type === 'comment' && item.value.trim() === openDelimiter) {\n            start = true;\n            return false;\n          }\n\n          if (item.type === 'comment' && item.value.trim() === closeDelimiter) {\n            start = false;\n            return false;\n          }\n\n          return !start;\n        });\n      }\n    });\n  };\n};\n\nexport default rehypeIgnore;","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":"AAEA,SAAS,KAAT,QAAsB,kBAAtB;;AAaA,MAAM,YAAY,GAAyC,YAAiB;EAAA,IAAhB,OAAgB,uEAAN,EAAM;EAC1E,MAAM;IAAE,aAAa,GAAG,qBAAlB;IAAyC,cAAc,GAAG;EAA1D,IAAkF,OAAxF;EACA,OAAQ,IAAD,IAAS;IACd,KAAK,CAAC,IAAD,EAAO,CAAC,IAAD,EAA2B,KAA3B,EAAkC,MAAlC,KAA4C;MACtD,IAAI,IAAI,CAAC,IAAL,KAAc,SAAd,IAA2B,IAAI,CAAC,IAAL,KAAc,MAA7C,EAAqD;QACnD;QACA;QACA;QACA;QACA;QACA,IAAI,KAAK,GAAG,KAAZ;QACA,IAAI,CAAC,QAAL,GAAgB,IAAI,CAAC,QAAL,CAAc,MAAd,CAAsB,IAAD,IAAS;UAC5C,IAAI,IAAI,CAAC,IAAL,KAAc,SAAd,IAA2B,IAAI,CAAC,KAAL,CAAW,IAAX,OAAsB,aAArD,EAAoE;YAClE,KAAK,GAAG,IAAR;YACA,OAAO,KAAP;UACD;;UACD,IAAI,IAAI,CAAC,IAAL,KAAc,SAAd,IAA2B,IAAI,CAAC,KAAL,CAAW,IAAX,OAAsB,cAArD,EAAqE;YACnE,KAAK,GAAG,KAAR;YACA,OAAO,KAAP;UACD;;UAED,OAAO,CAAC,KAAR;QACD,CAXe,CAAhB;MAYD;IACF,CArBI,CAAL;EAsBD,CAvBD;AAwBD,CA1BD;;AA4BA,eAAe,YAAf","sourceRoot":"","sourcesContent":["import { visit } from 'unist-util-visit';\nconst rehypeIgnore = (options = {}) => {\n    const { openDelimiter = 'rehype:ignore:start', closeDelimiter = 'rehype:ignore:end' } = options;\n    return (tree) => {\n        visit(tree, (node, index, parent) => {\n            if (node.type === 'element' || node.type === 'root') {\n                // const start = node.children.findIndex((item) => item.type === 'comment' && item.value === openDelimiter);\n                // const end = node.children.findIndex((item) => item.type === 'comment' && item.value === closeDelimiter);\n                // if (start > -1 && end > -1) {\n                //   node.children = node.children.filter((_, idx) => idx < start || idx > end);\n                // }\n                let start = false;\n                node.children = node.children.filter((item) => {\n                    if (item.type === 'comment' && item.value.trim() === openDelimiter) {\n                        start = true;\n                        return false;\n                    }\n                    if (item.type === 'comment' && item.value.trim() === closeDelimiter) {\n                        start = false;\n                        return false;\n                    }\n                    return !start;\n                });\n            }\n        });\n    };\n};\nexport default rehypeIgnore;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}