{"ast":null,"code":"export const getURLParameters = url => (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce((a, v) => (a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1), a), {});\nexport const prevChild = function () {\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let index = arguments.length > 1 ? arguments[1] : undefined;\n  let i = index;\n\n  while (i > -1) {\n    i--;\n    if (!data[i]) return;\n\n    if (data[i] && data[i].value && data[i].value.replace(/(\\n|\\s)/g, '') !== '' || data[i].type !== 'text') {\n      if (!/^rehype:/.test(data[i].value) || data[i].type !== 'comment') return;\n      return data[i];\n    }\n  }\n\n  return;\n};\nexport const nextChild = function () {\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let index = arguments.length > 1 ? arguments[1] : undefined;\n  let tagName = arguments.length > 2 ? arguments[2] : undefined;\n  let i = index;\n\n  while (i < data.length) {\n    i++;\n\n    if (tagName) {\n      const element = data[i];\n\n      if (element && element.value && element.value.replace(/(\\n|\\s)/g, '') !== '' || data[i] && data[i].type === 'element') {\n        return element.tagName === tagName ? element : undefined;\n      }\n    } else {\n      const element = data[i];\n      if (!element || element.type !== 'text' && element.type !== 'comment' || element.type === 'text' && element.value.replace(/(\\n|\\s)/g, '') !== '') return;\n\n      if (element.type === 'comment') {\n        if (!/^rehype:/.test(element.value)) return;\n        const nextNode = nextChild(data, i, 'pre');\n        if (nextNode) return;\n        return element;\n      }\n    }\n  }\n\n  return;\n};\n/**\n * 获取代码注视的位置\n * @param data 数据\n * @param index 当前数据所在的位置\n * @returns 返回 当前参数数据 Object，`{}`\n */\n\nexport const getCommentObject = _ref => {\n  let {\n    value = ''\n  } = _ref;\n  const param = getURLParameters(value.replace(/^rehype:/, ''));\n  Object.keys(param).forEach(keyName => {\n    if (param[keyName] === 'true') {\n      param[keyName] = true;\n    }\n\n    if (param[keyName] === 'false') {\n      param[keyName] = false;\n    }\n\n    if (typeof param[keyName] === 'string' && !/^0/.test(param[keyName]) && !isNaN(+param[keyName])) {\n      param[keyName] = +param[keyName];\n    }\n  });\n  return param;\n};\nexport const propertiesHandle = (defaultAttrs, attrs, type) => {\n  if (type === 'string') {\n    return { ...defaultAttrs,\n      'data-config': JSON.stringify({ ...attrs,\n        rehyp: true\n      })\n    };\n  } else if (type === 'attr') {\n    return { ...defaultAttrs,\n      ...attrs\n    };\n  }\n\n  return { ...defaultAttrs,\n    'data-config': { ...attrs,\n      rehyp: true\n    }\n  };\n};","map":{"version":3,"sources":["../src/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["export const getURLParameters = (url) => (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce((a, v) => ((a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1)), a), {});\nexport const prevChild = (data = [], index) => {\n    let i = index;\n    while (i > -1) {\n        i--;\n        if (!data[i])\n            return;\n        if ((data[i] && data[i].value && data[i].value.replace(/(\\n|\\s)/g, '') !== '') || data[i].type !== 'text') {\n            if (!/^rehype:/.test(data[i].value) || data[i].type !== 'comment')\n                return;\n            return data[i];\n        }\n    }\n    return;\n};\nexport const nextChild = (data = [], index, tagName) => {\n    let i = index;\n    while (i < data.length) {\n        i++;\n        if (tagName) {\n            const element = data[i];\n            if (element && element.value && element.value.replace(/(\\n|\\s)/g, '') !== '' || data[i] && data[i].type === 'element') {\n                return element.tagName === tagName ? element : undefined;\n            }\n        }\n        else {\n            const element = data[i];\n            if (!element || (element.type !== 'text' && element.type !== 'comment') || (element.type === 'text' && element.value.replace(/(\\n|\\s)/g, '') !== ''))\n                return;\n            if (element.type === 'comment') {\n                if (!/^rehype:/.test(element.value))\n                    return;\n                const nextNode = nextChild(data, i, 'pre');\n                if (nextNode)\n                    return;\n                return element;\n            }\n        }\n    }\n    return;\n};\n/**\n * 获取代码注视的位置\n * @param data 数据\n * @param index 当前数据所在的位置\n * @returns 返回 当前参数数据 Object，`{}`\n */\nexport const getCommentObject = ({ value = '' }) => {\n    const param = getURLParameters(value.replace(/^rehype:/, ''));\n    Object.keys(param).forEach((keyName) => {\n        if (param[keyName] === 'true') {\n            param[keyName] = true;\n        }\n        if (param[keyName] === 'false') {\n            param[keyName] = false;\n        }\n        if (typeof param[keyName] === 'string' && !/^0/.test(param[keyName]) && !isNaN(+param[keyName])) {\n            param[keyName] = +param[keyName];\n        }\n    });\n    return param;\n};\nexport const propertiesHandle = (defaultAttrs, attrs, type) => {\n    if (type === 'string') {\n        return { ...defaultAttrs, 'data-config': JSON.stringify({ ...attrs, rehyp: true }) };\n    }\n    else if (type === 'attr') {\n        return { ...defaultAttrs, ...attrs };\n    }\n    return { ...defaultAttrs, 'data-config': { ...attrs, rehyp: true } };\n};\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"module"}